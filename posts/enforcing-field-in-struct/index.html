<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#680"><title>Enforcing Field Names in Go</title><meta name="description" content="This place is a note for myself"><link rel="stylesheet" href="/css/prism-base16-monokai.dark.css"><link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Kha&#39;s - Journeys and times of me"><link rel="alternate" href="/feed/feed.json" type="application/json" title="Kha&#39;s - Journeys and times of me"><link rel="stylesheet" href="/css/index.css"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({
        startOnLoad: true,
        theme: "forest",
      });</script></head><body><div class="topnav"><div class="topnav-content"><a href="/" style="vertical-align: middle"><img src="/img/home.svg" alt="home icon" align="middle" height="18" width="18"> <span>Kha</span> </a><a href="/research">Research</a> <a href="/blog">Blog</a><div class="topnav-right"><a href="https://github.com/lotusirous" target="_blank" rel="noreferrer" title="Github"><img alt="Github" src="/img/social/github.svg" height="20" width="20"></a><a href="https://twitter.com/__ngtrongkha" target="_blank" rel="noreferrer" title="Twitter"><img alt="Twitter" src="/img/social/twitter.svg" height="20" width="20"></a></div></div></div><div id="content"><div id="main"><main><div class="article"><div class="when"><time datetime="Nov 2, 2023">Nov 2, 2023</time></div><h1 class="post-title">Enforcing Field Names in Go</h1><h2>The problem</h2><p>Sometimes, you want a struct field in Go to clearly convey its meaning through its value. However, you also want to enforce that the caller explicitly provides the field names to ensure the struct remains clear and understandable.</p><pre><code>// Bad

User{&quot;Foo&quot;, 16, &quot;foo@bar.com&quot;}

// Good
User{Name: &quot;Foo&quot;, Age: 16, Email: &quot;foo@bar.com&quot;}
</code></pre><p>This post introduces a technique to enforce the use of field names when initializing <code>structs</code>.</p><p>This technique has been discussed and well-documented in a Github issue (<a href="https://github.com/golang/go/issues/2794">https://github.com/golang/go/issues/2794</a>) and has found its way into various Go codebases.</p><p>Here's the trick in action:</p><pre><code>type Struct struct {
    A int
    B string
    _ struct{} // The trick
}
</code></pre><p>With this struct definition, any usage of <code>Struct{1, &quot;2&quot;}</code> will result in a compile error, prompting developers to specify field names.</p><p>Compile Error:</p><pre><code>./prog.go:4:16: too few values in Struct literal
</code></pre><p>The <code>_ struct{}</code> field serves as a clever reminder for the developer to be more explicit about their intentions when creating struct literals.</p><div class="direction"><div class="previous"><a href="/posts/semgrep-with-vim/">Using semgrep in vim</a> Â»</div></div></div></main></div></div><footer></footer></body></html>