<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#680"><title>Slice tricks in go</title><meta name="description" content="Slice tricks"><link rel="stylesheet" href="/css/prism-base16-monokai.dark.css"><link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Kha&#39;s - Journeys and times of me"><link rel="alternate" href="/feed/feed.json" type="application/json" title="Kha&#39;s - Journeys and times of me"><link rel="stylesheet" href="/css/index.css"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({
        startOnLoad: true,
        theme: "forest",
      });</script></head><body><div class="topnav"><div class="topnav-content"><a href="/" style="vertical-align: middle"><img src="/img/home.svg" alt="home icon" align="middle" height="18" width="18"> <span>Kha</span> </a><a href="/research">Research</a> <a href="/blog">Blog</a><div class="topnav-right"><a href="https://github.com/lotusirous" target="_blank" rel="noreferrer" title="Github"><img alt="Github" src="/img/social/github.svg" height="20" width="20"></a><a href="https://twitter.com/__ngtrongkha" target="_blank" rel="noreferrer" title="Twitter"><img alt="Twitter" src="/img/social/twitter.svg" height="20" width="20"></a><a href="https://unix.stackexchange.com/users/40333/lotusirous" target="_blank" rel="noreferrer" title="StackExchange"><img alt="StackExchange" class="keep-original" src="/img/social/Stack_Exchange_icon.svg" height="20" width="20"></a></div></div></div><div id="content"><div id="main"><main><div class="article"><div class="when"><time datetime="Jun 4, 2023">Jun 4, 2023</time></div><h1 class="post-title">Slice tricks in go</h1><p>In go, a slice is a data structure that holds a backed array, plus its length and capacity. It performs a actions for adding a new element and shrinking the element if the backed array is almost empty. This post introduces a few tricks that you can use and reduce a little time for writing code.</p><h2>Append a slice</h2><p>We usually write the code for appending a slice as below.</p><pre class="language-go"><code class="language-go"><span class="token keyword">var</span> s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span></code></pre><p>However, we also can do this to reduce 1 line of code.</p><pre class="language-go"><code class="language-go">s <span class="token operator">:=</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span></code></pre><p>The syntax <code>[]string(nil)</code> is a syntactic sugar because we can pass a nil slice in a single line with <code>append</code></p><h2>Copy a slice</h2><pre class="language-go"><code class="language-go"><span class="token keyword">var</span> src <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
dst <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">copy</span><span class="token punctuation">(</span>dst<span class="token punctuation">,</span> src<span class="token punctuation">)</span></code></pre><p>Or we can do</p><pre class="language-go"><code class="language-go"><span class="token keyword">var</span> d <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token function">copy</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">,</span> <span class="token string">"baz"</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><div class="direction"><div class="next">« <a href="/posts/the-weird-thing-in-go-json/">encoding/json is weird</a></div><div class="previous"><a href="/posts/zP-in-vim/">`zy` and `zp` in recent vim </a>»</div></div></div></main></div></div><footer></footer></body></html>